; Saved by version: 2.5.8

[EventSearchKitchenRandom]
buttons=1
event1=
remove=TokenSearchKitchenRandom

[EventExploreChapelViaCrypt]
buttons=1
event1=
remove=TokenExploreChapelViaCrypt

[EventPlaceFoyerExploreStudy]
xposition=-19.25
yposition=7
vartests=VarOperation:exploredStudy,==,0 
buttons=1
event1=EventPlaceFoyerExploreStairs
add=TokenExploreStudyViaFoyer

[EventPlaceChapelExploreCryptWithKey]
vartests=VarOperation:foundKey,>,0 VarTestsLogicalOperator:AND VarOperation:exploredCrypt,==,0 
buttons=1
event1=EventPlaceChapelWhiskey
add=TokenExploreCryptViaChapel

[EventPlaceHall2ViaStudy]
vartests=VarOperation:exploredHall2ViaStudy,>,0 
buttons=1
event1=EventPlaceHall2TileEnd

[EventMythosStart]
display=false
buttons=1
event1=EventMythosSarahPatterStart
trigger=Mythos

[EventPlaceDrivewayStart]
xposition=5.25
yposition=3.5
operations=$mythosOutdoors,=,1 $mythosFlavor,=,1 $mythosHelp,=,1
buttons=1
event1=EventPlaceDrivewayInvestigators
add=TileDriveway

[EventPlaceDrivewayExploreKitchen]
xposition=3.5
yposition=5.25
buttons=1
event1=EventPlaceDrivewayGate
add=TokenExploreKitchenViaDriveway
remove=TokenDrivewayInvestigators

[EventPlaceDrivewaySearchGardenTool]
xposition=6.229136
yposition=0.8718178
buttons=1
event1=EventPlaceDrivewayEnd
add=TokenSearchDrivewayGardenTool

[EventPlaceDrivewayInvestigators]
xposition=5.25
yposition=5.25
buttons=1
event1=EventPlaceDrivewayExploreKitchen
add=TokenDrivewayInvestigators
audio=AudioInvestigator

[EventExploreBackdoorPassJournal]
xposition=6.186221
yposition=3.182559
buttons=1
event1=EventPlaceDrivewayExploreBackdoorSight
add=TokenSearchDrivewayJournal
remove=TokenDrivewayBen

[EventSearchDrivewayJournal]
operations=foundJournal,=,1
buttons=1
event1=
add=QItemJournal
remove=TokenSearchDrivewayJournal

[EventPlacePorchSearchPottedPlant]
buttons=1
event1=EventPlacePorchExploreDiningRoom
add=TokenSearchBackdoorRandom

[EventPlacePorchExploreDiningRoom]
buttons=1
event1=EventMoveAfterExplore
add=TokenExploreDiningRoomViaBackdoor

[EventMoveAfterExplore]
comment=Rules:\nIf Ben is angry and the priest is dead, there is a 40% chance of moving\nIf Ben is angry, there is a 60% chance of moving\nIf the priest is dead, there is a 60% chance of moving\nOthewise, there is a 100% chance of moving
operations=moveAfterExploreMedium,=,#rand5
display=false
buttons=1
event1=EventMoveAfterExploreSightToken EventMoveAfterExploreAngryBenDeadPriest EventMoveAfterExploreAngryBen EventMoveAfterExploreDeadPriest EventMoveAfterExploreGoodGuys EventMoveAfterExploreEnd

[EventExploreDiningRoom]
buttons=1
event1=EventPlaceDiningRoom
remove=TokenExploreDiningRoomViaBackdoor

[EventPlaceDiningRoom]
xposition=-1.75
yposition=7
comment=Set up wanderer parameters after the gate fiasco; doing it here because the time to apologize has now passed.
operations=$mythosDiningRoom,=,1 $mythosHelp,=,1 $mythosMinor,=,1 exploredDiningRoom,=,1 wandererMax,=,#heroes wandererMax,-,exploredBackyardNicely wandererFrequency,=,2 wandererFrequency,+,exploredBackyardNicely
vartests=VarOperation:talkedToBenCount,>=,2 
buttons=1
event1=EventPlaceDiningRoomExploreKitchen
add=TileDiningRoom TokenBackyardBenPassive TokenDoorDiningRoom
remove=TokenExploreDiningRoomViaBackdoor TokenBackyardBenBefore
trigger=VarTalkedToBackyardBen

[EventPlaceDiningRoomExploreKitchen]
xposition=0
yposition=5.25
buttons=1
event1=EventPlaceDiningRoomOtherExploreTokens
add=TokenExploreKitchenViaDiningRoom TileDiningRoom

[EventPlaceKitchen]
xposition=1.75
yposition=7
operations=$mythosKitchen,=,1
buttons=1
event1=EventPlaceKitchenSearchCutlery
add=TileDiningRoom
remove=TokenExploreKitchenViaDiningRoom

[EventPlaceDiningRoomSearchFluxStabilizer]
xposition=-1.633719
yposition=5.685318
buttons=1
event1=EventPlaceDiningRoomPaper
add=TokenSearchDiningRoomFluxStabilizer

[EventSearchBackdoor2x4]
operations=searchedDiningRoomRubble,=,1
buttons=2
event1=EventSearchBackdoor2x4Pass
event2=EventSearchBacdoor2x4Fail
quota=3

[EventSearchBackdoor2x4Pass]
buttons=1
event1=
add=QItem2x4

[EventSearchBacdoor2x4Fail]
buttons=1
event1=
add=QItem2x4
remove=TokenSearchBackdoor2x4

[EventPlaceDiningRoomOtherExploreTokens]
xposition=-1.75
yposition=7
buttons=1
event1=EventPlaceDiningRoomSearchFluxStabilizer
add=TokenExploreBasementFirst TokenExploreHall1ViaDiningRoom

[EventExploreBasementBrawnFirst]
buttons=2
event1=EventExploreBasementBrawnFirstPass
event2=EventExploreBasementBrawnFirstFail
quota=2

[EventExploreBasementBrainThirdPass]
buttons=1
event1=EventPlaceBasementConditionStart
remove=TokenExploreBasementThird

[EventExploreBasementBrawnFirstPass]
buttons=1
event1=EventPlaceBasementConditionStart
remove=TokenExploreBasementFirst

[EventExploreBasementBrainThirdFail]
buttons=1
event1=

[EventExploreBasementBrawnFirstFail]
buttons=1
event1=
add=TokenExploreBasementSecond
remove=TokenExploreBasementFirst

[EventExploreBasementBrawnSecondFail]
buttons=1
event1=
add=TokenExploreBasementThird
remove=TokenExploreBasementSecond

[EventPlaceGallery]
xposition=-7
yposition=10.5
operations=exploredGallery,=,1
buttons=1
event1=EventPlaceGalleryExploreFoyer EventPlaceGalleryExploreHall1 EventPlaceGalleryExploreCoatRoom
add=TileGallery
remove=TokenExploreGalleryViaHall1 TokenExploreGalleryViaFoyer

[EventExploreBasementBrawnThird]
buttons=2
event1=EventExploreBasementBrawnThirdPass
event2=EventExploreBasementBrawnThirdFail
quota=2

[EventExploreBasementBrawnThirdPass]
buttons=1
event1=EventPlaceBasementConditionStart
remove=TokenExploreBasementThird
audio=AudioLocked2

[EventExploreBasementBrawnThirdFail]
buttons=1
event1=

[EventExploreBasementBrainThird]
buttons=2
event1=EventExploreBasementBrainThirdPass
event2=EventExploreBasementBrainThirdFail
quota=2

[EventPlaceBasementConditionInstructions]
xposition=-1.566474
yposition=8.281469
buttons=1
event1=
add=TokenExploreBasementViaDiningRoomSight
remove=TokenExploreBasementThird TokenExploreBasementSecond TokenExploreBasementFirst

[EventPlaceBasement]
xposition=0
yposition=14
operations=exploredBasement,=,1
buttons=1
event1=EventPlaceBasementDarkness
add=TileBasement TokenBasementWall
remove=TokenExploreBasementViaDiningRoomSight

[EventExploreBasementBrainSecondFail]
buttons=1
event1=
add=TokenExploreBasementThird
remove=TokenExploreBasementSecond

[EventExploreBasementBrainSecond]
buttons=2
event1=EventExploreBasementBrainSecondPass
event2=EventExploreBasementBrainSecondFail
quota=2

[EventExploreBasementBrainSecondPass]
buttons=1
event1=EventPlaceBasementConditionStart
remove=TokenExploreBasementSecond

[EventExploreBasementBrainFirst]
buttons=2
event1=EventExploreBasementBrainFirstPass
event2=EventExploreBasementBrainFirstFail
quota=2

[EventExploreBasementBrainFirstPass]
buttons=1
event1=EventPlaceBasementConditionStart
remove=TokenExploreBasementFirst
audio=AudioLocked1

[EventExploreBasementBrainFirstFail]
buttons=1
event1=
add=TokenExploreBasementSecond
remove=TokenExploreBasementFirst
audio=AudioNegative6

[EventExploreBasementBrawnSecond]
buttons=2
event1=EventExploreBasementBrawnSecondPass
event2=EventExploreBasementBrawnSecondFail
quota=2

[EventExploreBasementBrawnSecondPass]
buttons=1
event1=EventPlaceBasementConditionStart
remove=TokenExploreBasementSecond

[EventPlaceHall1]
xposition=-7
yposition=5.25
operations=$mythosHall,=,1 exploredHall1,=,1 $mythosOutdoors,=,0
display=false
buttons=1
event1=EventPlaceHall1ViaDoor
add=TileHall1 TokenWallHall1
remove=TokenExploreHall1ViaDiningRoom
audio=AudioDoorOpen3

[EventPlaceHall1Painting]
xposition=-8.75
yposition=3.5
buttons=1
event1=EventPlaceHall1SearchEvidence
add=TokenSearchHall1Picture

[EventPlaceHall1SearchEvidence]
xposition=-7.859615
yposition=4.803223
buttons=1
event1=EventPlaceHall1Flavor
add=TokenSearchHall1Rug

[EventPlaceHall1ExploreGallery]
xposition=-5.25
yposition=7
vartests=VarOperation:exploredGallery,==,0 
buttons=1
event1=EventPlaceHall1Painting
add=TokenExploreGalleryViaHall1

[EventPlaceHall1ExploreHall2]
xposition=-10.5
yposition=5.25
buttons=1
event1=EventPlaceHall1ExploreGallery EventPlaceHall1Painting
add=TokenExploreHall2ViaHall1

[EventPlaceHall1Flavor]
buttons=1
event1=EventMoveAfterExplore
audio=AudioAtmosphere2

[EventTest]
operations=$mythosHelp,=,0 $mythosDeadly,=,0 $mythosFlavor,=,0 $mythosMajor,=,0 $mythosMinor,=,0 testInitialized,=,1
vartests=VarOperation:testInitialized,==,0 VarTestsLogicalOperator:AND VarOperation:testMode,>,0 
buttons=1
event1=
add=TokenTestPlaceDriveway TokenTestTakeBooks TokenTestStartRitual TokenTestRitualPreparations TokenTestRitualFinished TokenTestPlaceTortureChamber TokenTestPlaceLibraryViaStudy TokenTestPlaceLibraryAfterCultists TokenTestPlaceChapelViaLibrary TokenTestPlaceKitchenViaDiningRoom TokenTestPlaceStudyViaHall2 TokenTestPlaceHall2ViaHall1 TokenTestPlaceStudyViaFoyer TokenTestPlaceDungeonCell TokenTestPlaceCryptViaDungeonCave TokenTestPlaceDiningRoomViaBackdoor TokenTestPlaceCryptViaChapel TokenTestPlaceCoatRoomViaGallery TokenTestPlaceAltar TokenTestInitChosenInvestigator TokenTestPlaceDriveway TokenTestBasementViaDiningRoomSight TileStudy TileHall2 TileGallery TileFoyer TileDriveway TileDiningRoom TileCrypt TileChapel TileBasement TileBackdoor TileAltar TokenTestPlaceHall1ViaDiningRoom TokenTestPlaceFoyerViaGallery TokenTestPlaceGalleryViaFoyer TokenExploreHall2ViaFoyer TokenTestPlaceFoyerViaHall2 TokenTestPlaceStudyViaFoyer TokenTestPlaceStudyViaHall2 TokenTestPlaceFoyerViaStudy TokenTestPlaceHall2ViaFoyer TokenTestPlaceDungeonCaveViaBasement TokenTestPlaceDungeonCaveViaCrypt TokenTestPlaceHall1ViaHall2 TokenTestPlaceBackdoorViaDriveway TokenTestPlaceGalleryViaHall1 TokenTestJournal2 TokenTestBenTrigger TileStairs TokenTestPlaceStairs TileHall1 TileTortureChamber
audio=AudioCrows

[EventExploreFoyerLockedDoor]
buttons=1
event1=

[EventSearchStairs]
operations=searchedStairs,=,1
buttons=1
event1=
remove=TokenSearchStairs

[EventSearchKitchenCutlery]
buttons=1
event1=
add=QItemCutlery
remove=TokenSearchKitchenCutlery

[EventPlaceKitchenSearchCutlery]
xposition=2.678298
yposition=7.934886
buttons=1
event1=EventPlaceKitchenBrassKey
add=TokenSearchKitchenCutlery

[EventPlaceDiningRoomPaper]
xposition=-0.6385758
yposition=9.043348
buttons=1
event1=EventPlaceDiningRoomNoJournal EventMoveAfterExplore
add=TokenSearchDiningRoomPaper

[EventSearchDiningRoomPaper]
buttons=1
event1=
add=QItemEvidenceDiningRoom
remove=TokenSearchDiningRoomPaper

[EventExploreKitchenViaDriveway]
buttons=1
event1=
add=TokenSightPlaceKitchenViaDriveway
remove=TokenExploreKitchenViaDriveway

[EventSearchHall1Picture]
xposition=-8.75
yposition=3.5
buttons=1
event1=EventSearchHall1Picture2
remove=TokenSearchHall1Picture

[EventSearchHall1Picture2]
xposition=-5.25
yposition=5.25
comment=The sarah variable is set to 1 after the chosen investigator talks to her.
operations=sarah,=,0
buttons=1
event1=
add=TokenSarah

[EventTalkToSarahFirstTime]
buttons=2
event1=EventTalkToSarahHall1
event2=

[EventTalkToSarahHall1]
operations=sarah,=,1
buttons=1
event1=
remove=TokenSarah

[EventMythosRitualRestrained]
vartests=VarOperation:counterRitual,>,0 
buttons=1
event1=
trigger=Mythos

[EventInteractSarahSpeaks1]
buttons=1
event1=

[EventPlaceLibrary]
xposition=-22.75
yposition=3.5
operations=$mythosLibrary,=,1 exploredLibrary,=,1 wandererInStudy,=,0
buttons=1
event1=SpawnLibraryCultist
add=TokenWallLibrary
remove=TokenExploreLibraryViaStudy

[EventPlaceLibraryAfterCultist]
xposition=-22.83398
yposition=1.498664
buttons=1
event1=EventPlaceLibraryAfterCultistSearchBookcase
add=TokenSearchLibraryKey
trigger=DefeatedCustomMonsterLibraryCultist

[EventPlaceDrivewayBen]
buttons=1
event1=
add=TokenDrivewayBen

[EventExploreLibraryBookcaseStrengthFail]
buttons=1
event1=

[EventPlaceLibraryAfterCultistSearchBookcase]
xposition=-22.75
yposition=7
buttons=1
event1=
add=TokenSearchLibraryBookcase

[EventSearchLibraryBook]
buttons=2
event1=EventSearchLibraryBookPass
event2=EventSearchLibraryBookFail
quota=4

[EventSearchLibraryBookPass]
buttons=1
event1=EventSearchLibraryBookcaseExplore
remove=TokenSearchLibraryBookcase

[EventSearchLibraryBookFail]
buttons=1
event1=

[EventSearchLibraryBookcaseExplore]
buttons=1
event1=
add=TokenLibraryTrapDoor TokenExploreLibraryBookcase
audio=AudioDoorCreak1

[EventExploreLibraryBookcaseLorePass]
operations=exploredChapelViaLibrary,=,1
buttons=1
event1=EventPlaceChapel
remove=TokenExploreLibraryBookcase

[EventPlaceChapel]
xposition=-21
yposition=17.5
operations=$mythosChapel,=,1 exploredChapel,=,1 wandererInLibrary,=,0
buttons=1
event1=EventPlaceChapelEscape
add=TileChapel TokenChapelTrapdoorToLibrary

[EventPlaceChapelLectern]
buttons=1
event1=EventMoveAfterExplore
add=TokenSearchChapelRitualComponents

[EventPlaceChapelWhiskey]
buttons=1
event1=EventPlaceChapelLectern
add=TokenSearchChapelWhiskey

[EventSearchChapelWhiskey]
operations=$mythosMinor,=,1
buttons=1
event1=EventSearchChapelWhiskeyNoise
add=QItemWhiskey
remove=TokenSearchChapelWhiskey

[EventSearchChapelWhiskeyNoise]
xposition=-19.26278
yposition=15.73507
buttons=1
event1=
add=TokenChapelPriestAlive

[EventStartupClueTokensEnd]
display=false
buttons=1
event1=EventStartupKateStart

[EventSearchChapelWhiskeyChat]
operations=foundRitualDagger,=,1 wandererFrequency,+,2
buttons=1
event1=EventPlaceChapelAfterPriest
add=QItemRitualDagger
remove=TokenChapelPriestAlive

[EventSearchChapelWhiskeyKill]
operations=chapelPriestDead,=,1 wandererMax,+,2 wandererFrequency,-,1
buttons=1
event1=EventPlaceChapelAfterPriest
add=QItemRitualDagger
remove=TokenChapelPriestAlive

[EventStartupClueTokensYes]
vartests=VarOperation:testMode,==,0 
buttons=1
event1=EventStartupClueTokensEnd

[EventSearchChapelRitualComponents]
operations=foundHealingStone,=,1
buttons=1
event1=
add=QItemRitualComponents
remove=TokenSearchChapelRitualComponents

[EventExploreLibraryBookcaseStrength]
buttons=2
event1=EventExploreLibraryBookcaseStrengthPass
event2=EventExploreLibraryBookcaseStrengthFail
quota=5

[EventExploreLibraryBookcaseStrengthPass]
buttons=1
event1=EventPlaceChapel
remove=TokenExploreLibraryBookcase

[EventGameOverStart]
display=false
buttons=1
event1=EventGameOverTell
trigger=Eliminated

[EventGameDoneEnd]
operations=$end,=,1
display=false
buttons=0
remove=UIStoryImage UIStoryBackground UIGameOverWinStopRitualText UIGameOverWinStopCultistsText UIGameOverWinRescueBoyText UIGameOverLoseStopRitualText UIGameOverLoseStopCultistsText UIGameOverLoseRescueBoy UIGameOverHalfWinStopRitualText UIGameOverHalfWinStopCultists UIGameOverHalfWinRescueBoyText UIStoryFrame UIOpeningTitle UIStoryContinue

[EventPlaceFoyer]
xposition=-15.75
yposition=10.5
operations=exploredFoyer,=,1 wandererInGallery,=,0
buttons=1
event1=EventPlaceFoyerExploreGallery EventPlaceFoyerExploreHall2 EventPlaceFoyerExploreStudy EventPlaceFoyerExploreStairs
add=TileFoyer
remove=TokenExploreFoyerViaHall2 TokenExploreFoyerViaGallery TokenExploreFoyerViaStudy

[EventPlaceStudy]
xposition=-21
yposition=3.5
operations=$mythosStudy,=,1 exploredStudy,=,1 wandererCountdown,=,wandererFrequency wandererInFoyer,=,0 wandererInHall2,=,0
buttons=1
event1=EventPlaceStudyExploreFoyerYes EventPlaceStudyExploreHall2Yes EventPlaceStudyExploreLibrary
add=TileStudy TokenDoorStudy
remove=TokenExploreStudyViaHall2 TokenExploreStudyViaFoyer

[EventPlaceCryptElderSignPendant]
xposition=-12.93704
yposition=15.63063
operations=exploredViaSight,=,1
buttons=1
event1=EventMoveAfterExplore
add=TokenSearchCryptElderSignPendant

[EventPlaceDungeonCave]
xposition=-7
yposition=17.5
operations=exploredDungeonCave,=,1
buttons=1
event1=EventPlaceDungeonCaveExploreCryptYes EventPlaceDungeonCaveExploreTortureChamber
add=TileTortureChamber
remove=TokenExploreDungeonCaveViaBasement TokenExploreDungeonCaveViaCrypt

[EventPlaceTortureChamber]
xposition=-8.75
yposition=19.25
operations=exploredTortureChamber,=,1
buttons=1
event1=EventPlaceTortureChamberExploreCellStopCultists EventPlaceTortureChamberExploreCell
add=TileTortureChamber
remove=TokenExploreTortureChamber

[EventPlaceAltar]
xposition=0
yposition=19.25
comment=We disable all location-based mythos actions here since everyone will be in the Altar Room.  Also, the major and deadly mythos events are disabled--everyone will be busy already. :)\n\nMark all journal pages as 'read.'
operations=$mythosChapel,=,0 $mythosCrypt,=,0 $mythosDarkness,=,0 $mythosDiningRoom,=,0 $mythosHall,=,0 $mythosKitchen,=,0 $mythosLibrary,=,0 $mythosOutdoors,=,0 $mythosStudy,=,0 $mythosMajor,=,0 $mythosDeadly,=,0 readJournalPage2,=,1 readJournalPage4,=,1 readJournalPage5,=,1 readJournalPage6,=,1 readJournalPage7,=,1 readJournalPage1,=,1 transportInvestigators,=,0 $mythosKey,=,0 exploredAltar,=,1
buttons=1
event1=EventPlaceAltarInvestigators
add=TileAltar
remove=TokenDavidSmythesSon SpawnCellStartRitualMonster SpawnMythosWandererLibrary SpawnMythosWandererStudy SpawnMythosWandererChapel

[EventPlaceAltarPortal]
xposition=-1.75
yposition=19.25
buttons=1
event1=SpawnPlaceAltarSpawnDavid
add=TokenPortal
remove=TokenAltarInvestigators

[EventPlaceAltarDavid]
display=false
buttons=1
event1=

[EventPlaceAltarWoman]
xposition=0.601809
yposition=20.10877
buttons=1
event1=EventPlaceAltarForceField
add=TokenDyingWoman

[EventPlaceAltarInvestigators]
xposition=-1.75
yposition=19.25
comment=This is run when the portal opens and the room is first explored, or when the room has already been explored and the portal opens.
buttons=1
event1=EventPlaceAltarPortal
add=TokenAltarInvestigators

[EventPlaceAltarExploreDoor]
buttons=1
event1=EventPlaceAltarForceField

[EventPlaceAltarSpawnCultists]
xposition=-1.75
yposition=19.25
operations=cultistCount,=,#heroes cultistCount,-,1
display=false
buttons=1
event1=SpawnAltarCultists4 SpawnAltarCultists3 SpawnAltarCultists2 EventPlaceAltarNoCultists

[EventPlaceAltarForceField]
buttons=1
event1=EventPlaceAltarSpawnCultists

[EventPlaceCell]
xposition=-5.564456
yposition=19.17281
operations=exploredCell,=,1
buttons=1
event1=EventPlaceCellHoleViaJournalTrigger EventPlaceCellNoRitual
add=TileTortureChamber
remove=TokenExploreCell

[EventPlaceCellHoleYes]
xposition=-7
yposition=19.25
vartests=VarOperation:readAboutCellHole,>,0 
buttons=1
event1=EventPlaceCellNoRitual
add=TokenCellHoleInTheWall

[EventPlaceCellExploreAltar]
buttons=1
event1=

[EventPlaceCellNoRitual]
display=false
buttons=1
event1=EventPlaceCellNoRitualYes EventPlaceCellRitualIsFinished EventPlaceCellRitualRunning EventPlaceCellNotReady EventPlaceCellEnd

[EventPlaceCellHole]
display=false
buttons=1
event1=EventPlaceCellHoleYes EventPlaceCellNoRitual

[EventPlaceCellNoRitualYes]
xposition=-5.839826
yposition=20.0869
vartests=VarOperation:ritual,==,0 VarTestsLogicalOperator:OR VarOperation:goal,==,2 
buttons=1
event1=EventPlaceCellStartRitualYes EventPlaceCellRitualIsFinished SpawnCellStartRitualMonster EventPlaceCellNotReady EventPlaceCellEnd
add=TokenDavidSmythesSon

[EventPlaceCellStartRitualYes]
xposition=-5.53134
yposition=19.1809
comment=Since the wall is up, mark page 6 as read.  It could mess up the journal, but it probably doesn't matter right now since no one will be able to read it.
operations=ritual,=,1 readJournalPage6,=,1 readAboutCellHole,=,1
vartests=VarOperation:foundRitualDagger,>,0 VarTestsLogicalOperator:AND VarOperation:foundRitualComponents,>,0 VarTestsLogicalOperator:AND VarOperation:foundDVM,>,0 VarTestsLogicalOperator:AND VarOperation:goal,==,goalStopRitual 
buttons=1
event1=EventPlaceCellRitualIsFinished SpawnCellStartRitualMonster EventPlaceCellNotReady EventPlaceCellEnd
add=TokenCellHoleInTheWall
remove=TokenDavidSmythesSon

[EventPlaceAltarFinalize]
buttons=1
event1=

[EventPlaceCellNotReady]
vartests=VarOperation:goal,==,goalStopRitual 
buttons=1
event1=EventBackyardBenAfterReadPage1

[EventPlaceCellRitualIsFinished]
vartests=VarOperation:ritualDone,>,0 VarTestsLogicalOperator:AND VarOperation:foundElderSignPendant,>,0 VarTestsLogicalOperator:AND VarOperation:foundRitualComponents,>,0 VarTestsLogicalOperator:OR VarOperation:foundRitualDagger,>,0 VarTestsLogicalOperator:AND VarOperation:readDVMPage7,>,0 VarTestsLogicalOperator:AND VarOperation:readAboutCellHole,>,0 VarTestsLogicalOperator:AND VarOperation:goal,==,goalStopRitual 
buttons=1
event1=EventPlaceAltar

[EventEvadeCellLloiger]
buttons=1
event1=

[EventMythosSarahPatterStart]
display=false
buttons=1
event1=EventMythosSarahPatterGo EventMythosSarahPatterEnd

[EventMythosSarahPatterEnd]
comment=This is a choke-point that everything links through.
buttons=1
event1=EventMythosWandererStart

[EventMythosRitualInProgress]
vartests=VarOperation:ritual,>,0 
display=false
buttons=1
event1=EventMythosRitualBoy EventMythosRitualWoman EventMythosRitualPortal EventMythosRitualSummonsStart EventMythosRitualContinues EventMythosRitualFail EventMythosRitualIncrement

[EventMythosRitualBoy]
comment=The length of the ritual is determined by this formula:  12 + (3 - #heroes) * 2
operations=ritualLength,=,3 ritualLength,-,#heroes ritualLength,*,2 ritualLength,+,12
vartests=VarOperation:ritual,==,1 
buttons=1
event1=EventMythosRitualIncrement

[EventMythosRitualWoman]
vartests=VarOperation:ritual,==,2 
buttons=1
event1=EventMythosRitualIncrement

[EventMythosRitualPortal]
operations=ritualDone,=,1
vartests=VarOperation:ritual,==,3 
buttons=1
event1=EventMythosRitualReady EventMythosRitualNotReady

[EventMythosRitualSummonsStart]
vartests=VarOperation:ritual,==,4 
display=false
buttons=1
event1=EventMythosRitualSummonsPresent EventMythosRitualSummonsNotPresent

[EventMythosRitualContinues]
vartests=VarOperation:davidDead,==,0 VarTestsLogicalOperator:AND VarOperation:ritual,<=,ritualLength 
buttons=1
event1=EventMythosRitualReady EventMythosRitualNotReady

[EventMythosCounterRitualYes]
display=false
buttons=1
event1=EventMythosCounterRitualEnd

[EventMythosHealingStoneYesEarly]
vartests=VarOperation:foundHealingStone,>,0 VarTestsLogicalOperator:AND VarOperation:healingStoneActive,>,1 
buttons=1
event1=EventMythosHealingStoneEnd

[EventMythosRitualFail]
vartests=VarOperation:ritual,>,ritualLength VarTestsLogicalOperator:AND VarOperation:davidDead,==,0 
buttons=1
event1=

[EventKillDavidSmythe]
operations=counterRitual,=,1 davidDead,=,1
buttons=1
event1=
trigger=DefeatedCustomMonsterDavidSmythe

[EventPlaceStudyBook]
xposition=-9.672299
yposition=1.737979
buttons=1
event1=EventPlaceStudyExploreLibrary

[EventPlaceChapelExploreCryptWithNoKey]
vartests=VarOperation:foundKey,==,0 VarTestsLogicalOperator:AND VarOperation:exploredCrypt,==,0 
buttons=1
event1=EventPlaceChapelWhiskey
add=TokenExploreCryptNoKey

[EventKillChapelRiot]
operations=chapelPriestDead,=,1 wandererMax,+,1
buttons=1
event1=EventPlaceChapelAfterPriest
add=QItemRitualDagger
trigger=DefeatedCustomMonsterChapelRiot

[EventStartupOpeningSplashStartYes]
vartests=VarOperation:testMode,==,0 
display=false
buttons=1
event1=EventStartupOpeningSplashEnd
add=UIStoryImage UIStoryBackground UIOpeningText UIStoryFrame UIOpeningTitle UIStoryContinue

[EventStartupOpeningSplashEnd]
operations=exploredOpening,=,1
vartests=VarOperation:initialized,==,0 
display=false
buttons=1
event1=EventStartupClueTokens
remove=UIStoryBackground UIStoryFrame UIStoryImage UIOpeningText UIOpeningTitle UIStoryContinue

[EventExploreBackdoorFailJournal]
buttons=1
event1=
add=TokenSearchDrivewayJournal TokenExploreBackdoorViaDrivewaySight
remove=TokenDrivewayBen

[EventSearchBackdoorRandom]
buttons=2
event1=EventSearchBackdoorPlantRandomGood
event2=EventSearchBackdoorPlantRandomBad
quota=2
remove=TokenSearchBackdoorRandom

[EventSearchHall1Rug]
buttons=1
event1=
add=QItemEvidenceHall1
remove=TokenSearchHall1Rug

[EventPlaceStudyExploreLibrary]
xposition=-21
yposition=1.75
buttons=1
event1=EventPlaceStudyHealingStone
add=TokenExploreLibraryViaStudy

[EventPlaceHall2TileEnd]
xposition=-14
yposition=5.25
operations=exploredHall2,=,1
display=false
buttons=1
event1=EventPlaceHall2ExploreFoyer EventPlaceHall2ExploreHall1 EventPlaceHall2ExploreStudy

[EventPlaceHall2ExploreFoyer]
xposition=-12.25
yposition=7
vartests=VarOperation:exploredFoyer,==,0 
buttons=1
event1=EventPlaceHall2ExploreHall1 EventPlaceHall2ExploreStudy
add=TokenExploreFoyerViaHall2

[EventSearchStairsPass]
buttons=1
event1=
add=QItemBigGun
remove=TokenSearchStairs

[EventLookStairsOthersOthersTested]
operations=exploredStairsJunk,+,1
buttons=1
event1=

[EventSearchFoyerSpell]
xposition=-18.89692
yposition=10.0169
operations=foundCandles,=,1
buttons=1
event1=
add=QItemFoyerSpell
remove=TokenSearchFoyerSpell

[EventPlaceGalleryExploreFoyer]
xposition=-10.5
yposition=12.25
vartests=VarOperation:exploredFoyer,==,0 
buttons=1
event1=EventPlaceGalleryExploreHall1 EventPlaceGalleryExploreCoatRoom
add=TokenExploreFoyerViaGallery

[EventPlaceGalleryExploreCoatRoom]
xposition=-5.821666
yposition=11.71968
buttons=1
event1=EventPlaceGallerySearchDVM
add=TokenExploreCoatRoom

[EventPlaceCoatRoom]
xposition=-6.108791
yposition=13.16377
operations=exploredCoatRoom,=,1
buttons=1
event1=EventMoveAfterExplore
add=TokenSearchCoatRoomEvidence
remove=TokenExploreCoatRoom

[EventPlaceGallerySearchDVM]
buttons=1
event1=EventMoveAfterExplore
add=TokenSearchGalleryDVM

[EventPlaceGalleryExploreHall1]
xposition=-5.25
yposition=7
vartests=VarOperation:exploredHall1,==,0 
buttons=1
event1=EventPlaceGalleryExploreCoatRoom

[EventPlaceHall2ExploreStudy]
xposition=-17.5
yposition=5.25
vartests=VarOperation:exploredStudy,==,0 
buttons=1
event1=EventPlaceHall2AfterExploreTokens
add=TokenExploreStudyViaHall2

[EventPlaceFoyerExploreGallery]
xposition=-10.5
yposition=12.25
vartests=VarOperation:exploredGallery,==,0 
buttons=1
event1=EventPlaceFoyerExploreHall2 EventPlaceFoyerExploreStudy EventPlaceFoyerExploreStairs
add=TokenExploreGalleryViaFoyer

[EventPlaceFoyerSearchSpell]
buttons=1
event1=EventPlaceFoyerSearchRandom
add=TokenSearchFoyerSpell

[EventPlaceFoyerExploreHall2]
xposition=-12.25
yposition=7
vartests=VarOperation:exploredHall2,==,0 
buttons=1
event1=EventPlaceFoyerExploreStudy EventPlaceFoyerExploreStairs
add=TokenExploreHall2ViaFoyer

[EventPlaceHall2ExploreHall1]
xposition=-10.5
yposition=5.25
vartests=VarOperation:exploredHall1,==,0 
buttons=1
event1=EventPlaceHall2ExploreStudy

[EventSearchGalleryDVM]
xposition=-7.80957
yposition=9.173878
buttons=1
event1=
add=QItemDVM
remove=TokenSearchGalleryDVM

[EventSearchCoatRoomEvidence]
buttons=1
event1=
add=QItemEvidenceCoatRoom
remove=TokenSearchCoatRoomEvidence

[EventPlaceBasementTrapdoor]
xposition=1.451848
yposition=15.96698
vartests=VarOperation:readAboutBasementDoorToCave,>,0 
buttons=1
event1=EventPlaceBasementRubble
add=TokenSearchBasementTrapdoor

[EventPlaceBasementDarkness]
buttons=1
event1=EventPlaceBasementTrapdoor EventPlaceBasementRubble
add=TokenBasementDarkness1 TokenBasementDarkness2 TokenBasementDarkness3 TokenBasementDarkness4

[EventPlaceBasementRubble]
xposition=1.75
yposition=12.25
buttons=1
event1=EventMoveAfterExplore
add=TokenSearchBasementRubble

[EventSearchBasementRubble]
operations=foundEvidenceBasement,=,0 foundEvidenceCount,+,1
buttons=1
event1=
add=QItemEvidenceBasementRubble
remove=TokenSearchBasementRubble

[EventSearchCryptElderSignPendant]
operations=foundElderSignPendant,=,1
buttons=1
event1=
add=QItemElderSignPendant
remove=TokenSearchCryptElderSignPendant

[EventPlaceCrypt]
xposition=-14
yposition=15.75
buttons=1
event1=EventPlaceCryptExploreDungeonCaveYes EventPlaceCryptElderSignPendant
add=TileCrypt
remove=TokenExploreCryptViaChapel TokenExploreCryptViaDungeonCave

[EventSearchBasementTrapdoor]
xposition=1.75
yposition=17.5
buttons=1
event1=EventSearchBasementTrapdoorExplore
remove=TokenBasementWall TokenSearchBasementTrapdoor

[EventSearchBasementTrapdoorExplore]
xposition=1.75
yposition=17.5
buttons=1
event1=
add=TokenExploreDungeonCaveViaBasement

[EventPlaceDungeonCaveExploreTortureChamber]
xposition=-8.75
yposition=17.5
buttons=1
event1=EventMoveAfterExplore
add=TokenExploreTortureChamber

[EventPlaceTortureChamberSearchRestraint]
xposition=-6.854489
yposition=18.03632
buttons=1
event1=EventMoveAfterExplore
add=TokenSearchTortureChamberRestraint

[EventSearchTortureChamberRestraint]
buttons=1
event1=
add=QItemRandomEquipment
remove=TokenSearchTortureChamberRestraint

[EventPlaceTortureChamberExploreCell]
xposition=-5.573793
yposition=19.14547
buttons=1
event1=EventPlaceTortureChamberSearchRestraint
add=TokenExploreCell

[EventPlaceHall2MoveIfExplore]
vartests=VarOperation:exploredViaSightHall2,>,0 
display=false
buttons=0

[EventPlaceHall2ViaFoyer]
vartests=VarOperation:exploredHall2ViaFoyer,>,0 
buttons=1
event1=EventPlaceHall2TileEnd

[EventPlaceFoyerExploreStairs]
xposition=-20.76508
yposition=8.745578
buttons=1
event1=EventPlaceFoyerSearchSpell
add=TokenExploreStairsViaFoyer

[EventMoveAfterExploreCandidate]
operations=moveAfterExploreTest,=,#rand5
display=false
buttons=1
event1=EventMoveAfterExploreYes EventMoveAfterExploreEnd

[EventTestShowVariable]
vartests=VarOperation:foundDVM,>,0 
buttons=1
event1=

[EventTestTakeJournal]
buttons=1
event1=EventTestTakeDVM
add=QItemJournal

[EventTestTakeDVM]
buttons=1
event1=
add=QItemDVM

[EventMythosHealingStoneStart]
comment=The random number here is determines if the healing stone will heal this round.  If it is 1, it heals.  After the Ceremony Room is explored, the healing stone heals every turn, but only damage and horror.
operations=healingStoneActive,=,#rand2
display=false
buttons=1
event1=EventMythosHealingStoneYesLate EventMythosHealingStoneYesEarly EventMythosHealingStoneEnd

[EventMythosHealingStoneEnd]
display=false
buttons=1
event1=EventMythosEnd

[EventMythosRitualReady]
comment=If we take this path, the investigators have everything they need; they will be taken to the altar room at the start of the next round
operations=transportInvestigators,=,1
vartests=VarOperation:readDVMPage7,>,0 VarTestsLogicalOperator:AND VarOperation:foundDVM,>,0 VarTestsLogicalOperator:AND VarOperation:foundElderSignPendant,>,0 VarTestsLogicalOperator:AND VarOperation:foundRitualComponents,>,0 VarTestsLogicalOperator:AND VarOperation:foundRitualDagger,>,0 VarTestsLogicalOperator:AND VarOperation:exploredCell,>,0 
display=false
buttons=1
event1=EventMythosRitualIncrement

[EventMythosEnd]
display=false
buttons=0

[EventMythosRitualIncrement]
operations=ritual,+,1
vartests=VarOperation:ritual,>,0 
display=false
buttons=1
event1=EventMythosRitualEnd

[EventTestStartRitualYes]
operations=ritual,=,1
display=false
buttons=0

[EventMythosCounterRitualStart]
display=false
buttons=1
event1=EventMythosCounterRitualYes EventMythosCounterRitualEnd

[EventMythosCounterRitualEnd]
display=false
buttons=1
event1=EventMythosHealingStoneStart

[EventMythosRitualStart]
display=false
buttons=1
event1=EventMythosRitualYes EventMythosRitualYesTimeout EventMythosRitualEnd

[EventMythosRitualNotReady]
buttons=1
event1=EventMythosRitualIncrement

[EventInvestigatorTransportStart]
display=false
buttons=1
event1=EventInvestigatorTransportYes EventInvestigatorTransportEnd

[EventInvestigatorTransportYes]
comment=Clear the flag:  we only want this to run once.
vartests=VarOperation:exploredAltar,==,0 VarTestsLogicalOperator:AND VarOperation:ritualDone,>,0 VarTestsLogicalOperator:AND VarOperation:foundDVM,>,0 VarTestsLogicalOperator:AND VarOperation:readDVMPage7,>,0 VarTestsLogicalOperator:AND VarOperation:exploredCell,>,0 VarTestsLogicalOperator:AND VarOperation:foundElderSignPendant,>,0 VarTestsLogicalOperator:AND VarOperation:foundRitualComponents,>,0 VarTestsLogicalOperator:AND VarOperation:foundRitualDagger,>,0 
buttons=1
event1=EventPlaceAltar

[EventInvestigatorTransportEnd]
display=false
buttons=1
event1=EventInvestigatorEnd

[EventMythosRitualEnd]
display=false
buttons=1
event1=EventMythosCounterRitualStart

[EventMythosRitualSummonsPresent]
vartests=VarOperation:exploredAltar,>,0 
buttons=1
event1=EventMythosRitualSummonsEnd

[EventMythosRitualSummonsEnd]
display=false
buttons=1
event1=EventMythosRitualReady EventMythosRitualNotReady

[EventMythosRitualSummonsNotPresent]
buttons=1
event1=EventMythosRitualSummonsEnd

[EventTestStartRitual]
buttons=1
event1=EventTestStartRitualYes

[EventTestRitualPreparations]
operations=exploredCell,=,1 readDVMPage7,=,1 foundDVM,=,1 foundElderSignPendant,=,1 foundRitualComponents,=,1 foundRitualDagger,=,1
buttons=1
event1=EventTestRitualPreparations2
add=QItemDVM

[EventPlaceHall1ViaDoor]
buttons=1
event1=EventPlaceHall1ExploreHall2 EventPlaceHall1ExploreGallery EventPlaceHall1Painting

[EventPlaceHall2]
xposition=-14
yposition=5.25
operations=exploredHall2,=,1 wandererInGallery,=,0 wandererInFoyer,=,0
display=false
buttons=1
event1=EventPlaceHall2ViaStudy EventPlaceHall2ViaFoyer EventPlaceHall2ViaHall1 EventExploreFailure
add=TileHall2 TokenWallHall2
remove=TokenExploreHall2ViaFoyer TokenExploreHall2ViaHall1 TokenExploreStudyViaHall2

[EventPlaceHall2ViaHall1]
vartests=VarOperation:exploredHall2ViaHall1,>,0 
buttons=1
event1=EventPlaceHall2TileEnd

[EventInvestigatorStart]
display=false
buttons=1
event1=EventInvestigatorTransportStart
trigger=StartRound

[EventInvestigatorEnd]
display=false
buttons=1
event1=

[EventMythosRitualYes]
vartests=VarOperation:ritual,>,0 VarTestsLogicalOperator:AND VarOperation:goal,!=,goalRescueBoy 
display=false
buttons=1
event1=EventMythosRitualInProgress

[EventStartupInitializeStart]
comment=roundsBeforeRitual=(5 - #heroes)*2 + 15\n\nThere are several possible goals in this scenario:\n1. Kill Uncle and stop ritual\n2. Kill 20 + #heros cultists.  Once they are killed, the ritual cannot complete. If the ritual completes, investigators lose.\n3. Save the boy by escaping with him through the backdoor\n
operations=roundsBeforeRitual,=,5 roundsBeforeRitual,-,#heroes roundsBeforeRitual,*,2 roundsBeforeRitual,+,15 testMode,=,1 wandererInStudy,=,1 wandererInLibrary,=,1 wandererInChapel,=,1 wandererInHall2,=,1 wandererInFoyer,=,1 wandererInGallery,=,1 wandererCount,=,0 wandererFrequency,=,2 wandererCountdown,=,wandererFrequency wandererMax,=,#heroes wandererMax,-,1 wanderKilledCount,=,0 endWin,=,1 endPartialWin,=,2 endFail,=,3
display=false
buttons=1
event1=EventStartupInitializeEnd

[EventStartupInitializeEnd]
display=false
buttons=1
event1=EventStartupGoalStart

[EventStartupStart]
display=false
buttons=1
event1=EventStartupInitializeStart
trigger=EventStart

[EventMythosRitualYesTimeout]
operations=ritual,=,1
vartests=VarTestsParenthesis:( VarOperation:goal,!=,goalRescueBoy VarTestsParenthesis:) VarTestsLogicalOperator:AND VarOperation:ritual,==,0 VarTestsLogicalOperator:AND VarOperation:#round,>,roundsBeforeRitual 
display=false
buttons=1
event1=EventMythosRitualInProgress

[EventPlaceDrivewayEnd]
operations=exploredDriveway,=,1
display=false
buttons=1
event1=EventPlaceDrivewayWendy

[EventStartupOpeningSplashStart]
display=false
buttons=1
event1=EventStartupOpeningSplashStartYes EventStartupOpeningSplashEnd

[EventMythosHealingStoneYesLate]
comment=One the portal is found, no more clues or improvements, but healing every round
vartests=VarOperation:exploredAltar,>,0 VarTestsLogicalOperator:AND VarOperation:foundHealingStone,>,0 VarTestsLogicalOperator:AND VarOperation:healingStoneActive,>,1 
buttons=1
event1=EventMythosHealingStoneEnd

[EventExploreHall2DoorLocked]
buttons=1
event1=

[EventInteractChapelTrapdoorTest]
buttons=2
event1=
event2=EventInteractChapelTrapdoorPlaceDiningRoom
quota=2

[EventExploreCaveViaDungeonCaveOpen]
buttons=1
event1=EventMoveAfterExplore

[EventInteractChapelTrapdoorPlaceDiningRoom]
xposition=-2.663495
yposition=9.38818
buttons=1
event1=

[EventTestRitualPreparations2]
operations=readJournalPage1,=,1 readJournalPage2,=,1 readJournalPage3,=,1 readJournalPage4,=,1 readJournalPage5,=,1 readJournalPage6,=,1 readJournalPage7,=,1
buttons=1
event1=
add=QItemJournal

[EventPlaceCellEnd]
display=false
buttons=1
event1=EventMoveAfterExplore

[EventTestPlaceDungeonCellYes]
display=false
buttons=1
event1=EventPlaceCell

[EventPlaceCellRitualRunning]
comment=We talk about this tile on the spawn; by splitting it out, the trapdoor shows UNDER the monster instead of the other way around.
vartests=VarOperation:ritual,>,0 VarTestsLogicalOperator:AND VarOperation:ritualDone,==,0 
display=false
buttons=1
event1=SpawnCellStartRitualMonster
add=TokenCellHoleInTheWall

[EventTestRitualFinishedYes]
operations=ritualDone,=,1
buttons=1
event1=

[EventTestTransportInvestigatorsYes]
operations=ritualDone,=,1
buttons=1
event1=EventInvestigatorStart

[EventStartupEnd]
display=false
buttons=1
event1=EventTest

[EventPlaceBasementConditionConfirm]
buttons=2
event1=EventPlaceBasement
event2=

[EventPlaceBasementConditionStart]
display=false
buttons=1
event1=EventPlaceBasementConditionRubbleSearchYes EventPlaceBasementConditionInstructions
add=TokenDiningRoomDarknessBottom TokenDiningRoomDarknessTop

[EventPlaceBasementConditionRubbleSearchYes]
comment=only put back the search token if we haven't used it yet
vartests=VarOperation:searchedDiningRoomRubble,==,0 
display=false
buttons=1
event1=EventPlaceBasementConditionInstructions

[EventPlaceBasementConditionStart0]
comment=Add the darkness but remove the search token; otherwise,  the darkness overlaps the search
display=false
buttons=1
event1=EventPlaceBasementConditionStart
add=TokenDiningRoomDarknessTop TokenDiningRoomDarknessBottom

[EventSearchStudyHealingStone]
operations=foundHealingStone,=,1
buttons=1
event1=
add=QItemHealingStone
remove=TokenSearchStudyHealingStone

[EventPlaceStudyExploreFoyerYes]
xposition=-19.25
yposition=7
vartests=VarOperation:exploredFoyer,==,0 
buttons=1
event1=EventPlaceStudyExploreHall2Yes EventPlaceStudyExploreLibrary
add=TokenExploreFoyerViaStudy

[EventPlaceStudyHealingStone]
xposition=-19.28075
yposition=3.157698
buttons=1
event1=EventMoveAfterExplore
add=TokenSearchStudyHealingStone

[EventSearchLibraryKey]
operations=foundKey,=,1 $mythosKey,=,1
buttons=1
event1=
add=QItemKey
remove=TokenSearchLibraryKey

[EventExploreFailure]
buttons=1
event1=

[EventPlaceHall2AfterExploreTokens]
buttons=1
event1=
add=TokenSearchHall2Evidence

[EventSearchHall2Evidence]
buttons=1
event1=
add=QItemEvidenceHall2
remove=TokenSearchHall2Evidence

[EventPlaceStudyExploreHall2Yes]
vartests=VarOperation:exploredHall2,==,0 
display=false
buttons=1
event1=EventPlaceStudyExploreLibrary
add=TokenExploreHall2ViaStudy

[EventSearchFoyerRandom]
xposition=-13.69859
yposition=13.06204
buttons=1
event1=
add=QItemFoyerRandom
remove=TokenSearchFoyerRandom

[EventPlaceFoyerSearchRandom]
xposition=-13.72812
yposition=13.08275
buttons=1
event1=EventPlaceFoyerCandlesViaHall2 EventPlaceFoyerCandlesViaOthers
add=TokenSearchFoyerRandom

[EventSearchDrivewayGardenTool]
buttons=1
event1=
add=QItemGardenTool
remove=TokenSearchDrivewayGardenTool

[EventPlaceDrivewayGate]
xposition=3.5
yposition=1.75
buttons=1
event1=EventPlaceDrivewaySearchGardenTool
add=TokenExploreBackdoorViaDriveway

[EventExploreBackdoorPass]
xposition=6.203831
yposition=3.190307
operations=exploredBackyardNicely,=,0
buttons=1
event1=EventExploreBackdoorPass2
add=TokenDrivewayBen
remove=TokenExploreBackdoorViaDriveway

[EventPlaceDrivewayExploreBackdoorSight]
buttons=1
event1=
add=TokenExploreBackdoorViaDrivewaySight
remove=TokenDrivewayBen

[EventExploreBackdoorFail]
operations=exploredBackyardNicely,=,1 exploredBackdoorViaDriveway,=,1
buttons=1
event1=EventExploreBackdoorFailJournal
add=TokenDrivewayBen TokenExploreBackdoorViaDrivewaySight
remove=TokenExploreBackdoorViaDriveway

[EventExploreBackdoorFailSearchJournal]
xposition=5.25
yposition=1.75
buttons=1
event1=
add=TokenSearchDrivewayJournal
remove=TokenDrivewayBen

[EventExploreDiningRoomViaBackdoor]
operations=exploredDiningRoomViaBackdoor,=,1
vartests=VarOperation:talkedBenCount,>=,2 
buttons=1
event1=EventPlaceDiningRoom

[EventChosenInvestigator]
buttons=2
event1=EventTestChosenInvestigatorWanderers EventSearchDiningRoomFluxStabilizer
event2=

[EventSearchDiningRoomFluxStabilizer]
buttons=1
event1=EventSearchDiningRoomFluxStabilizerGet

[EventSearchDiningRoomFluxStabilizerGet]
xposition=-1.624196
yposition=5.713624
highlight=true
buttons=1
event1=EventSearchDiningRoomFluxStabilizerFinnYes EventSearchDiningRoomFluxStabilizerKate EventSearchDiningRoomFluxStabilizerEnd
add=TokenSearchDiningRoomFluxStabilizerPuzzle
remove=TokenSearchDiningRoomFluxStabilizer

[EventSearchDiningRoomFluxStabilizerFinnYes]
vartests=VarOperation:#HeroFinnEdwards,>,0 
buttons=1
event1=EventSearchDiningRoomFluxStabilizerKate EventSearchDiningRoomFluxStabilizerEnd
add=QItemBrassKnuckles

[EventSearchDiningRoomFluxStabilizerKate]
vartests=VarOperation:#HeroKateWinthrop,>,0 
buttons=2
event1=EventSearchDiningRoomFluxStablizerKateYes
event2=EventSearchDiningRoomFluxStabilizerKateNo

[EventStartupKateStart]
display=false
buttons=1
event1=EventStartupKateYes EventStartupKateEnd

[EventStartupKateYes]
vartests=VarOperation:#HeroKateWinthrop,>,0 
buttons=1
event1=EventStartupKateEnd

[EventFluxStablizerInspect]
buttons=1
event1=

[EventStartupKateEnd]
display=false
buttons=1
event1=EventStartupPlaceDrivewayStart

[EventKillWandererEnd]
display=false
buttons=0

[EventSearchDiningRoomFluxStablizerKateYes]
buttons=1
event1=EventSearchDiningRoomFluxStabilizerEnd

[EventSearchDiningRoomFluxStabilizerKateNo]
buttons=1
event1=EventSearchDiningRoomFluxStabilizerEnd

[EventSearchDiningRoomFluxStabilizerAfterPuzzleBen]
display=false
buttons=1
event1=EventSearchDiningRoomFluxStabilizerAfterPuzzleBenHappy EventSearchDiningRoomFluxStabilizerBenAngry

[EventMythosWandererStart]
operations=wandererCountdown,-,1
display=false
buttons=1
event1=SpawnMythosWandererGallery SpawnMythosWandererFoyer SpawnMythosWandererHall2 SpawnMythosWandererStudy SpawnMythosWandererLibrary SpawnMythosWandererBackyard EventMythosWandererNotPlaced

[EventMythosWandererPlaced]
operations=wandererCountdown,=,wandererFrequency wandererCount,+,1
display=false
buttons=1
event1=EventMythosWandererEnd

[EventMythosWandererNotPlaced]
display=false
buttons=1
event1=EventMythosWandererEnd

[EventMythosWandererEnd]
display=false
buttons=1
event1=EventMythosRitualStart

[EventKillWanderer]
comment=A MythosWanderer was killed, update the stats.  Do not reset wandererCountdown:  there's no benefit to killing monsters.
operations=wandererCount,-,1 wanderersKilled,+,1
display=false
buttons=1
event1=EventKillWandererEnd
trigger=DefeatedCustomMonsterWanderer

[EventPlaceCryptExploreDungeonCaveYes]
vartests=VarOperation:exploredDungeonCave,==,0 
display=false
buttons=1
event1=EventPlaceCryptElderSignPendant
add=TokenExploreDungeonCaveViaCrypt

[EventExploreDungeonCaveViaCryptYes]
operations=exploredDungeonCaveViaCrypt,=,1
display=false
buttons=1
event1=EventPlaceDungeonCave

[EventPlaceDungeonCaveExploreCryptYes]
xposition=-10.5
yposition=15.75
vartests=VarOperation:exploredCrypt,>,0 
buttons=1
event1=EventPlaceDungeonCaveExploreTortureChamber
add=TokenExploreCryptViaDungeonCave

[EventPlaceBackdoorBenHappy]
xposition=-1.785068
yposition=2.288212
buttons=1
event1=EventPlaceBackdoorSearchRandom
add=TokenBackyardBenBefore TokenExploreDiningRoomViaBackdoor

[EventPlaceBackdoorSearchRandom]
xposition=0.632282
yposition=1.156427
buttons=1
event1=
add=TokenSearchBackdoorRandom

[EventSearchBasementRubbleChapelDor]
display=false
buttons=0

[EventTestGetFluxStabilizer]
vartests=VarOperation:testMode,>,0 
buttons=1
event1=
add=QItemFluxStabilizer

[EventStartupClueTokens]
display=false
buttons=1
event1=EventStartupClueTokensYes EventStartupClueTokensEnd

[EventTestPlaceDrivewayStart]
display=false
buttons=1
event1=EventStartupPlaceDrivewayYes

[EventStartupPlaceDrivewayYes]
vartests=VarOperation:testMode,==,0 
display=false
buttons=1
event1=EventPlaceDrivewayStart

[EventStartupPlaceDrivewayStart]
display=false
buttons=1
event1=EventStartupPlaceDrivewayYes EventStartupPlaceDrivewayEnd

[EventStartupPlaceDrivewayEnd]
operations=initialized,=,1
display=false
buttons=1
event1=EventStartupEnd

[EventPlaceDrivewayWendy]
display=false
buttons=1
event1=EventPlaceDrivewayWendyYes EventPlaceDrivewayWendyEnd

[EventPlaceDrivewayWendyYes]
vartests=VarOperation:#HeroWendyAdams,>,0 
buttons=1
event1=EventPlaceDrivewayWendyEnd
add=QItemWendyGun

[EventPlaceDrivewayWendyEnd]
display=false
buttons=1
event1=EventStartupPlaceDrivewayEnd

[EventMythosWandererActivateStart]
operations=wandererActivateMoveAgain,=,1
display=false
buttons=1
event1=EventMythosWandererActivateMoveStart

[EventMythosWandererActivateMoveStart]
display=false
buttons=1
event1=EventMythosWandererActivateMove1

[EventMythosWandererActivateMove1]
buttons=2
event1=EventMythosWandererActivateMoveEnd
event2=

[EventMythosWandererActivateMoveEnd]
display=false
buttons=0

[EventSearchBackdoorPlantRandomGood]
buttons=1
event1=
add=QItemBackdoorRandom

[EventSearchBackdoorPlantRandomBad]
buttons=1
event1=

[EventWandererActivationStart]
display=false
buttons=1
event1=EventWandererMoveStart

[EventWandererMoveStart]
operations=wandererMoveSpaces,=,#rand3
display=false
buttons=1
event1=EventWandererMove

[EventWandererMove]
buttons=2
event1=EventWandererAttackStart
event2=EventWandererMoveEnd

[EventWandererMoveEnd]
buttons=1
event1=

[EventWandererHorrorCheck]
buttons=1
event1=

[EventPlaceKitchenBrassKey]
xposition=1.911058
yposition=4.314267
buttons=1
event1=EventMoveAfterExplore
add=TokenSearchKitchenRandom

[EventTestChosenInvestigatorWanderers]
operations=exploredBackyardNicely,=,1
vartests=VarOperation:testChosenInvestigator,>,0 
buttons=2
event1=EventTestChosenInvestigatorWandererSmashedGate
event2=EventTestChosenInvestigatorWandererEnd

[EventMoveAfterExploreSightToken]
operations=exploredViaSight,=,0
vartests=VarOperation:exploredViaSight,>,0 
display=false
buttons=0

[EventMoveAfterExploreAngryBenDeadPriest]
operations=moveAfterExploreLimit,=,4
vartests=VarOperation:exploredBackyardNicely,==,0 VarTestsLogicalOperator:AND VarOperation:chapelPriestDead,>,0 
display=false
buttons=1
event1=EventMoveAfterExploreCandidate

[EventMoveAfterExploreAngryBen]
operations=moveAfterExploreLimit,=,3
vartests=VarOperation:exploredBackyardNicely,==,0 
display=false
buttons=1
event1=EventMoveAfterExploreCandidate

[EventMoveAfterExploreDeadPriest]
operations=moveAfterExploreLimit,=,3
vartests=VarOperation:chapelPriestDead,>,0 
display=false
buttons=1
event1=EventMoveAfterExploreCandidate

[EventMoveAfterExploreGoodGuys]
operations=moveAfterExploreLimit,=,0
display=false
buttons=1
event1=EventMoveAfterExploreCandidate EventMoveAfterExploreEnd

[EventMoveAfterExploreEnd]
display=false
buttons=0

[EventMoveAfterExploreYes]
vartests=VarOperation:moveAfterExploreTest,>=,moveAfterExploreLimit 
buttons=1
event1=EventMoveAfterExploreEnd

[EventTestChosenInvestigatorWandererEnd]
operations=wandererMax,=,#heroes wandererMax,-,exploredBackyardNicely wandererFrequency,=,2
display=false
buttons=0

[EventTestChosenInvestigatorWandererSmashedGate]
operations=exploredBackyardNicely,=,0
display=false
buttons=1
event1=EventTestChosenInvestigatorWandererEnd

[EventFoundEvidenceStart]
comment=The BasementRubbleEvidence must be found and two others before chapel door to cave is revealed.
operations=foundEvidenceCount,+,1
display=false
buttons=1
event1=EventFoundEvidenceEnoughYes

[EventFoundEvidenceEnoughYes]
vartests=VarOperation:exploredChapel,>,0 VarTestsLogicalOperator:AND VarOperation:foundEvidenceRevealed,==,0 VarTestsLogicalOperator:AND VarOperation:foundEvidenceCount,>=,3 VarTestsLogicalOperator:AND VarOperation:foundEvidenceBasement,>,0 
buttons=1
event1=
add=TokenExploreCryptViaChapel
remove=TokenExploreCryptViaChapelFake

[EventPlaceChapelExploreCryptNoEvidence1]
vartests=VarOperation:foundEvidenceCount,<,3 
display=false
buttons=1
event1=TokenSearchChapelWhiskey

[EventPlaceChapelExploreCryptNoEvidence2]
vartests=VarOperation:foundEvidenceBasement,==,0 
display=false
buttons=1
event1=EventPlaceChapelWhiskey

[EventPlaceChapelAfterPriest]
display=false
buttons=1
event1=EventPlaceChapelExploreCrypt EventPlaceChapelExploreCryptFake

[EventPlaceChapelExploreCrypt]
vartests=VarOperation:foundEvidenceCount,>=,3 VarTestsLogicalOperator:AND VarOperation:foundEvidenceBasement,>,0 
buttons=1
event1=
add=TokenExploreCryptViaChapel

[EventPlaceChapelExploreCryptFake]
buttons=1
event1=
add=TokenExploreCryptViaChapelFake

[EventPlaceAltarNoCultists]
buttons=1
event1=

[EventDWMStartDisambiguator]
display=false
buttons=1
event1=EventDVMRitual EventDVMStart

[EventPlaceCellHoleViaJournalTrigger]
xposition=-3.821136
yposition=19.2771
vartests=VarOperation:exploredCell,>,0 
buttons=1
event1=
add=TokenCellHoleInTheWall
trigger=VarFoundCellHoleViaJournal

[EventPlaceBasementSearchTrapdoorViaJournal]
xposition=-2.164095
yposition=15.7211
vartests=VarOperation:exploredBasement,>,0 
buttons=1
event1=
add=TokenSearchBasementTrapdoor
trigger=VarFoundBasementDoorToCaveViaJournal

[EventSearchFoyerCandles]
operations=foundCandles,=,1
buttons=1
event1=
add=QItemCandles
remove=TokenSearchFoyerCandles

[EventSearchDiningRoomFluxStabilizerEnd]
display=false
buttons=1
event1=

[EventSearchDiningRoomFluxStabilizerAfterPuzzleBenHappy]
xposition=-2.639833
yposition=4.410515
vartests=VarOperation:exploredBackyardNicely,>,0 
buttons=1
event1=EventSearchDiningRoomFluxStabilizerAfterPuzzleEnd
add=TokenBackyardBenAfter
remove=TokenBackyardBenPassive

[EventSearchDiningRoomFluxStabilizerBenAngry]
buttons=1
event1=EventSearchDiningRoomFluxStabilizerAfterPuzzleEnd
add=TokenBackyardBenAfter
remove=TokenBackyardBenPassive

[EventBackyardBenPassiveAggressive]
vartests=VarOperation:exploredBackyardNicely,==,0 
buttons=1
event1=

[EventBackyardBenPassiveHappy]
buttons=1
event1=

[EventExploreBackdoorPass2]
buttons=1
event1=EventExploreBackdoorPassJournal

[EventPlaceBackdoor2x4Angry]
xposition=2.552819
yposition=2.544125
vartests=VarOperation:exploredBackyardNicely,==,0 
buttons=1
event1=EventPlaceBackdoorBenAngry
add=TokenSearchBackdoor2x4

[EventPlaceBackdoorBenAngry]
xposition=-1.756911
yposition=2.279916
buttons=1
event1=EventPlaceBackdoorSearchRandom
add=TokenBackyardBenBefore TokenExploreDiningRoomViaBackdoor

[EventPlaceBackdoor]
xposition=0
yposition=1.75
buttons=1
event1=EventPlaceBackdoor2x4Angry EventPlaceBackdoor2x4Happy
add=TileBackdoor TokenDoorBackdoor
remove=TokenExploreBackdoorViaDrivewaySight

[EventPlaceBackdoor2x4Happy]
xposition=2.582039
yposition=2.567158
buttons=1
event1=EventPlaceBackdoorBenHappy
add=TokenSearchBackdoor2x4

[EventSearchDiningRoomFluxStabilizerAfterPuzzle]
buttons=1
event1=EventSearchDiningRoomFluxStabilizerAfterPuzzleBen
add=QItemFluxStabilizer
remove=TokenSearchDiningRoomFluxStabilizerPuzzle

[EventPlaceFoyerCandlesViaHall2]
xposition=-11.1378
yposition=8.5403
vartests=VarOperation:exploredFoyerViaHall2,>,0 
buttons=1
event1=EventPlaceFoyerCandlesEnd
add=TokenSearchFoyerCandles

[EventPlaceFoyerCandlesEnd]
display=false
buttons=1
event1=EventSightFoyerLookFrontDoor

[EventPlaceFoyerCandlesViaOthers]
xposition=-11.1333
yposition=8.496567
buttons=1
event1=EventPlaceFoyerCandlesEnd
add=TokenSearchFoyerCandles

[EventMythosSarahPatterGo]
vartests=VarOperation:sarah,>,0 
display=false
buttons=1
event1=EventSarahPatterStart

[EventStartupGoalStart]
operations=goalStopRitual,=,1 goalRescueBoy,=,2 goalStopCultists,=,3 goal,=,#rand3
display=false
buttons=1
event1=EventStartupGoalBranch

[EventPlaceTortureChamberExploreCellStopCultists]
vartests=VarOperation:goal,==,goalStopCultists 
buttons=1
event1=EventPlaceTortureChamberSearchRestraint
add=TokenExploreCellGoalKillCultists

[EventGameOverTell]
display=false
buttons=0
add=UIStoryImage UIStoryBackground UIGameOverWinStopRitualText UIGameOverWinRescueBoyText UIGameOverWinStopCultistsText UIGameOverHalfWinStopRitualText UIGameOverHalfWinRescueBoyText UIGameOverHalfWinStopCultists UIGameOverLoseStopRitualText UIGameOverLoseRescueBoy UIGameOverLoseStopCultistsText UIStoryFrame UIOpeningTitle UIGameOverContinue

[EventTriggerJournalRead]
comment=For goalStopCultists, reset all wanderer parameters; cultists now spawn at back gate. The first effect is not felt until the mythos
operations=wandererFrequency,=,1 wandererMax,=,#heroes wandererCountdown,=,0 wandererInBackGate,=,1 wandererInGallery,=,0 wandererInFoyer,=,0 wandererInHall2,=,0 wandererInStudy,=,0 wandererInLibrary,=,0 wandererInChapel,=,0
vartests=VarOperation:goal,==,goalStopCultists VarOperation:dwmRead,>,0 
buttons=1
event1=
trigger=VarJournalRead

[EventTriggerDwmRead]
comment=For goalStopCultists, reset all wanderer parameters; cultists now spawn at back gate. The first effect is not felt until the mythos
operations=wandererFrequency,=,1 wandererMax,=,#heroes wandererCountdown,=,0 wandererInBackGate,=,1 wandererInGallery,=,0 wandererInFoyer,=,0 wandererInHall2,=,0 wandererInStudy,=,0 wandererInLibrary,=,0 wandererInChapel,=,0
vartests=VarOperation:goal,==,goalStopCultists VarOperation:journalRead,>,0 
buttons=1
event1=
trigger=VarDwmRead

[EventTriggerFoundElderSign]
comment=For goalStopCultists, reset all wanderer parameters; cultists now spawn at back gate. The first effect is not felt until the mythos
operations=wandererFrequency,=,1 wandererMax,=,#heroes wandererCountdown,=,0 wandererInBackGate,=,1 wandererInGallery,=,0 wandererInFoyer,=,0 wandererInHall2,=,0 wandererInStudy,=,0 wandererInLibrary,=,0 wandererInChapel,=,0
vartests=VarOperation:goal,==,goalStopCultists VarOperation:journalRead,>,0 VarOperation:dwmRead,>,0 
buttons=1
event1=
trigger=VarFoundElderSign

[EventStartupGoalBranch]
display=false
buttons=1
event1=EventStartupGoalStopRitual EventStartupGoalRescueBoy EventStartupGoalStopCultists

[EventStartupGoalStopRitual]
vartests=VarOperation:goal,==,goalStopRitual 
display=false
buttons=1
event1=EventStartupGoalEnd

[EventStartupGoalEnd]
display=false
buttons=1
event1=EventStartupOpeningSplashStart

[EventStartupGoalRescueBoy]
vartests=VarOperation:goal,==,goalRescueBoy 
display=false
buttons=1
event1=EventStartupGoalEnd

[EventStartupGoalStopCultists]
vartests=VarOperation:goal,==,goalStopCultists 
display=false
buttons=1
event1=EventStartupGoalEnd

[EventLookStairsFirst]
operations=lookedStairs,=,1
buttons=1
event1=
add=TokenSearchStairs

[EventPlaceStairs]
operations=ExploredStairs,=,1
buttons=1
event1=EventPlaceStairsSight
add=TileStairs
remove=TokenExploreStairsViaFoyer

[EventPlaceStairsSight]
buttons=1
event1=EventMoveAfterExplore
add=TokenStairsJunk

[EventLookStairsOthersOthers]
operations=lookedStairs,+,1
vartests=VarOperation:lookedStairs,>,2 
buttons=2
event1=EventLookStairsOthersOthersTest
event2=

[EventLookStairsOthers]
vartests=VarOperation:lookedStairs,>,0 
display=false
buttons=1
event1=EventLookStairsOthersOthers EventLookStairsOthersFirst

[EventKillChapelEscapeRiot]
buttons=1
event1=

[EventLookStairsOthersFirst]
operations=lookedStairs,+,1
buttons=2
event1=EventLookStairsOthersFirstTest
event2=

[EventLookStairsOthersOthersTest]
buttons=2
event1=EventLookStairsOthersOthersTested
event2=EventLookStairsOthersOthersTested
quota=999

[EventLookStairsOthersFirstTest]
buttons=2
event1=EventLookStairsOthersOthersTested
event2=EventLookStairsOthersOthersTested
quota=999

[EventLookPlaceKitchenViaDriveway]
buttons=1
event1=

[EventPlaceChapel2]
operations=exploredChapelViaCrypt2,=,1 @spawnChapel2Riot,=,1
display=false
buttons=1
event1=EventPlaceChapel2DeadPriest

[EventPlaceChapel2DeadPriest]
buttons=1
event1=EventPlaceChapel2Escape

[EventPlaceChapelEscape]
buttons=1
event1=EventPlaceChapelWhiskey
add=TokenExploreEscapeViaChapelLocked

[EventPlaceChapel2Escape]
buttons=1
event1=
add=TokenExploreEscapeViaChapelAjar

[EventExploreChapel2Escape]
vartests=VarOperation:chapel2AngryTownfolkDead,>,0 
buttons=1
event1=
add=TokenInteractEscape
remove=TokenExploreEscapeViaChapelAjar

[Event2]
display=false
buttons=0

[EventInteractEscape1]
vartests=VarOperation:escaped,==,1 
buttons=1
event1=EventInteractEscapeCheckDone

[EventInteractEscapeCheckDone]
operations=endWin,=,1
vartests=VarOperation:escaped,>=,#heroes 
display=false
buttons=1
event1=EventGameOverStart

[EventInteractEscape2]
vartests=VarOperation:escaped,==,2 
buttons=1
event1=EventInteractEscapeCheckDone

[EventInteractEscape3]
buttons=1
event1=EventInteractEscapeCheckDone

[EventInteractEscape4]
vartests=VarOperation:escaped,==,4 
buttons=1
event1=EventInteractEscapeCheckDone

[EventInteractEscape5]
vartests=VarOperation:escaped,>=,5 
buttons=1
event1=EventInteractEscapeCheckDone

[EventSearchDiningRoomFluxStabilizerAfterPuzzleEnd]
display=false
buttons=0

[EventPlaceDiningRoomNoJournal]
vartests=VarOperation:foundJournal,==,0 
buttons=1
event1=EventPlaceDiningRoomEnd

[EventSightFoyerLookFrontDoor]
xposition=-15.78354
yposition=13.48822
buttons=1
event1=EventMoveAfterExplore
remove=TokenSightFrontDoor

[EventPlaceFoyerSightFrontdoor]
buttons=1
event1=EventMoveAfterExplore
add=TokenSightFrontDoor
